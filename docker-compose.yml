# ComfyUI Docker Compose - Using lecode-official pre-built image
# https://github.com/lecode-official/comfyui-docker

services:
  comfyui:
    image: ghcr.io/lecode-official/comfyui-docker:latest
    container_name: comfyui
    ports:
      - "8189:8188"
    environment:
      - USER_ID=1000
      - GROUP_ID=1000
    volumes:
      # persist your models:
      - ./data/models:/opt/comfyui/models:rw
      
      # persist custom nodes:
      - ./data/custom_nodes:/opt/comfyui/custom_nodes:rw
      
      # persist outputs:
      - ./data/output:/opt/comfyui/output:rw
    
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: all
              capabilities: [gpu]
    
    restart: unless-stopped
